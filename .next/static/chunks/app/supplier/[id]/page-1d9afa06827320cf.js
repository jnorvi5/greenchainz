(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[239],{63:(e,s,t)=>{"use strict";var a=t(7260);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}})},1705:(e,s,t)=>{"use strict";t.d(s,{A:()=>c,AuthProvider:()=>n});var a=t(5155),l=t(2115);let i=(0,t(5553).UU)("your_supabase_project_url_here","your_supabase_anon_key_here"),r=(0,l.createContext)(void 0);function n(e){let{children:s}=e,[t,n]=(0,l.useState)(null),[c,d]=(0,l.useState)(null),[o,x]=(0,l.useState)(!0);(0,l.useEffect)(()=>{i.auth.getSession().then(e=>{var s;let{data:{session:t}}=e;d(t),n(null!=(s=null==t?void 0:t.user)?s:null),x(!1)});let{data:{subscription:e}}=i.auth.onAuthStateChange((e,s)=>{var t;d(s),n(null!=(t=null==s?void 0:s.user)?t:null),x(!1)});return()=>e.unsubscribe()},[]);let m=async()=>{await i.auth.signOut()};return(0,a.jsx)(r.Provider,{value:{user:t,session:c,loading:o,signOut:m},children:s})}function c(){let e=(0,l.useContext)(r);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},4175:(e,s,t)=>{Promise.resolve().then(t.bind(t,6355))},6355:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>x});var a=t(5155),l=t(2115),i=t(63),r=t(5553),n=t(1705),c=t(2619),d=t.n(c);let o=(0,r.UU)("your_supabase_project_url_here","your_supabase_anon_key_here");function x(){var e;let s=(0,i.useParams)().id,[t,r]=(0,l.useState)(null),[c,x]=(0,l.useState)(!0),[m,u]=(0,l.useState)({subject:"",message:""}),{user:h}=(0,n.A)();(0,l.useEffect)(()=>{s&&g()},[s]);let g=async()=>{try{let{data:e,error:t}=await o.from("suppliers").select("*").eq("id",s).single();if(t)throw t;r(e)}catch(e){console.error("Error fetching supplier:",e)}finally{x(!1)}},b=async()=>{if(null==t?void 0:t.contact_email)try{if((await fetch("/api/contact-supplier",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({supplierEmail:t.contact_email,supplierName:t.name,subject:m.subject,message:m.message,userEmail:null==h?void 0:h.email})})).ok)alert("Message sent successfully!"),u({subject:"",message:""});else throw Error("Failed to send message")}catch(e){alert("Error sending message. Please try again."),console.error(e)}};return c?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-700 mx-auto mb-4"}),(0,a.jsx)("p",{children:"Loading supplier profile..."})]})}):t?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto p-8",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)(d(),{href:"/",className:"text-blue-600 hover:text-blue-800 mb-4 inline-block",children:"← Back to Search"}),(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:t.name}),(0,a.jsx)("p",{className:"text-lg text-gray-600 mt-1",children:t.category}),(0,a.jsxs)("p",{className:"text-gray-500 mt-1",children:["\uD83D\uDCCD ",t.location]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"inline-block px-4 py-2 rounded-lg text-lg font-semibold ".concat(t.sustainability_score>=90?"bg-green-100 text-green-800":t.sustainability_score>=80?"bg-blue-100 text-blue-800":t.sustainability_score>=70?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:["Sustainability Score: ",t.sustainability_score,"/100"]}),t.verified&&(0,a.jsx)("div",{className:"mt-2 text-sm text-green-600 font-medium",children:"✓ Verified Supplier"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-3",children:"About"}),(0,a.jsx)("p",{className:"text-gray-700",children:t.description})]}),t.certifications&&t.certifications.length>0&&(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-3",children:"Certifications"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:t.certifications.map((e,s)=>(0,a.jsx)("span",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm",children:e},s))})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-3",children:"Sustainability Metrics"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[t.carbon_footprint&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Carbon Footprint"}),(0,a.jsxs)("div",{className:"text-lg font-semibold",children:[t.carbon_footprint," tons CO₂/year"]})]}),t.renewable_energy_percentage&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Renewable Energy"}),(0,a.jsxs)("div",{className:"text-lg font-semibold",children:[t.renewable_energy_percentage,"%"]})]}),t.waste_recycling_rate&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Waste Recycling"}),(0,a.jsxs)("div",{className:"text-lg font-semibold",children:[t.waste_recycling_rate,"%"]})]}),t.water_usage_efficiency&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Water Efficiency"}),(0,a.jsx)("div",{className:"text-lg font-semibold",children:t.water_usage_efficiency})]})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-3",children:"Company Details"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[t.established_year&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Founded"}),(0,a.jsx)("div",{className:"font-semibold",children:t.established_year})]}),t.employee_count&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Employees"}),(0,a.jsx)("div",{className:"font-semibold",children:t.employee_count})]}),t.annual_revenue&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Annual Revenue"}),(0,a.jsxs)("div",{className:"font-semibold",children:["$",null==(e=t.annual_revenue)?void 0:e.toLocaleString()]})]}),t.supply_chain_transparency&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Supply Chain Transparency"}),(0,a.jsx)("div",{className:"font-semibold",children:t.supply_chain_transparency})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-3",children:"Contact Information"}),(0,a.jsxs)("div",{className:"space-y-2",children:[t.contact_email&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Email"}),(0,a.jsx)("div",{className:"font-semibold",children:t.contact_email})]}),t.contact_phone&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Phone"}),(0,a.jsx)("div",{className:"font-semibold",children:t.contact_phone})]}),t.website&&(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)("a",{href:t.website,target:"_blank",rel:"noopener noreferrer",className:"inline-block bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition-colors",children:"Visit Website"})})]})]}),h&&t.contact_email&&(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-3",children:"Contact Supplier"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("input",{type:"text",placeholder:"Subject",value:m.subject,onChange:e=>u(s=>({...s,subject:e.target.value})),className:"w-full p-2 border rounded"}),(0,a.jsx)("textarea",{placeholder:"Your message...",value:m.message,onChange:e=>u(s=>({...s,message:e.target.value})),rows:4,className:"w-full p-2 border rounded"}),(0,a.jsx)("button",{onClick:b,className:"w-full bg-green-600 text-white py-2 rounded hover:bg-green-700 transition-colors",children:"Send Message"})]})]}),!h&&(0,a.jsxs)("div",{className:"bg-yellow-50 p-6 rounded-lg border border-yellow-200",children:[(0,a.jsx)("h3",{className:"font-semibold text-yellow-800 mb-2",children:"Sign In Required"}),(0,a.jsx)("p",{className:"text-yellow-700 text-sm mb-3",children:"Sign in to contact suppliers and access premium features."}),(0,a.jsx)(d(),{href:"/auth",className:"inline-block bg-yellow-600 text-white px-4 py-2 rounded hover:bg-yellow-700 transition-colors text-sm",children:"Sign In"})]})]})]})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Supplier Not Found"}),(0,a.jsx)(d(),{href:"/",className:"text-blue-600 hover:text-blue-800",children:"← Back to Search"})]})})}}},e=>{e.O(0,[553,619,441,255,358],()=>e(e.s=4175)),_N_E=e.O()}]);