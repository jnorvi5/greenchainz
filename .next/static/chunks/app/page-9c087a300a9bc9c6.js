(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{921:(e,t,s)=>{Promise.resolve().then(s.bind(s,7322))},1705:(e,t,s)=>{"use strict";s.d(t,{A:()=>l,AuthProvider:()=>o});var a=s(5155),i=s(2115);let n=(0,s(5553).UU)("your_supabase_project_url_here","your_supabase_anon_key_here"),r=(0,i.createContext)(void 0);function o(e){let{children:t}=e,[s,o]=(0,i.useState)(null),[l,c]=(0,i.useState)(null),[d,u]=(0,i.useState)(!0);(0,i.useEffect)(()=>{n.auth.getSession().then(e=>{var t;let{data:{session:s}}=e;c(s),o(null!=(t=null==s?void 0:s.user)?t:null),u(!1)});let{data:{subscription:e}}=n.auth.onAuthStateChange((e,t)=>{var s;c(t),o(null!=(s=null==t?void 0:t.user)?s:null),u(!1)});return()=>e.unsubscribe()},[]);let h=async()=>{await n.auth.signOut()};return(0,a.jsx)(r.Provider,{value:{user:s,session:l,loading:d,signOut:h},children:t})}function l(){let e=(0,i.useContext)(r);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},7322:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var a=s(5155),i=s(2115);s(5553);var n=s(1705),r=s(2619),o=s.n(r),l=s(5704);function c(){let[e,t]=(0,i.useState)(""),[s,r]=(0,i.useState)([]),[c,d]=(0,i.useState)(""),[u,h]=(0,i.useState)(""),[m,p]=(0,i.useState)({category:"",minScore:"",location:"",certification:""}),{user:x}=(0,n.A)(),g=async(e,t,s)=>{var a;let i=l.env.ZOHO_ACCESS_TOKEN;if(!i)throw Error("Zoho access token not configured");let n=await fetch("https://mail.zoho.com/api/accounts",{method:"GET",headers:{Authorization:"Zoho-oauthtoken ".concat(i),"Content-Type":"application/json"}});if(!n.ok)throw Error("Failed to get Zoho account info");let r=null==(a=(await n.json()).data[0])?void 0:a.accountId;if(!r)throw Error("No Zoho Mail account found");let o=await fetch("https://mail.zoho.com/api/accounts/".concat(r,"/messages"),{method:"POST",headers:{Authorization:"Zoho-oauthtoken ".concat(i),"Content-Type":"application/json"},body:JSON.stringify({toRecipients:e.map(e=>({address:e})),subject:t,content:s,mailFormat:"html"})});if(!o.ok)throw Error("Failed to send email");return o.json()},b=async()=>{try{let t=new URLSearchParams;e.trim()&&t.append("q",e),m.category&&t.append("category",m.category),m.minScore&&t.append("minScore",m.minScore),m.location&&t.append("location",m.location),m.certification&&t.append("certification",m.certification),(null==x?void 0:x.id)&&t.append("userId",x.id);let s=await fetch("/api/suppliers?".concat(t.toString()));if(!s.ok)throw Error("Search request failed");let a=await s.json();r(a.suppliers||[])}catch(e){alert("Error searching suppliers. Please try again."),console.error(e)}},f=(e,t)=>{p(s=>({...s,[e]:t}))},j=async()=>{try{await g(["support@greensourcing.com"],"Green Sourcing Inquiry","From: ".concat(c,"\n\n").concat(u)),alert("Message sent via Zoho!")}catch(e){alert("Error sending email. Please check your Zoho configuration."),console.error(e)}};return(0,a.jsx)("main",{className:"min-h-screen bg-gray-50",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto p-8",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-center mb-8 text-green-800 slide-up text-gradient",children:"Go-To Source for Green Sourcing"}),x?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("section",{className:"mb-12 slide-up",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Find Sustainable Suppliers"}),(0,a.jsxs)("div",{className:"flex mb-4 mobile-stack",children:[(0,a.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Search suppliers by name...",className:"input-field mobile-full"}),(0,a.jsx)("button",{onClick:b,className:"btn-primary ml-2 mobile-full mobile-center",children:"Search"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[(0,a.jsx)("h3",{className:"font-semibold mb-3",children:"Advanced Filters"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("select",{value:m.category,onChange:e=>f("category",e.target.value),className:"input-field",children:[(0,a.jsx)("option",{value:"",children:"All Categories"}),(0,a.jsx)("option",{value:"Manufacturing",children:"Manufacturing"}),(0,a.jsx)("option",{value:"Electronics",children:"Electronics"}),(0,a.jsx)("option",{value:"Textiles",children:"Textiles"}),(0,a.jsx)("option",{value:"Packaging",children:"Packaging"}),(0,a.jsx)("option",{value:"Water Treatment",children:"Water Treatment"}),(0,a.jsx)("option",{value:"Forestry",children:"Forestry"}),(0,a.jsx)("option",{value:"Automotive",children:"Automotive"}),(0,a.jsx)("option",{value:"Food Processing",children:"Food Processing"})]}),(0,a.jsxs)("select",{value:m.minScore,onChange:e=>f("minScore",e.target.value),className:"input-field",children:[(0,a.jsx)("option",{value:"",children:"Any Sustainability Score"}),(0,a.jsx)("option",{value:"90",children:"90+ (Excellent)"}),(0,a.jsx)("option",{value:"80",children:"80+ (Very Good)"}),(0,a.jsx)("option",{value:"70",children:"70+ (Good)"}),(0,a.jsx)("option",{value:"60",children:"60+ (Fair)"})]}),(0,a.jsx)("input",{type:"text",value:m.location,onChange:e=>f("location",e.target.value),placeholder:"Location (city, state)",className:"input-field"}),(0,a.jsxs)("select",{value:m.certification,onChange:e=>f("certification",e.target.value),className:"input-field",children:[(0,a.jsx)("option",{value:"",children:"Any Certification"}),(0,a.jsx)("option",{value:"ISO 14001",children:"ISO 14001"}),(0,a.jsx)("option",{value:"FSC Certified",children:"FSC Certified"}),(0,a.jsx)("option",{value:"USDA Organic",children:"USDA Organic"}),(0,a.jsx)("option",{value:"Energy Star Partner",children:"Energy Star"}),(0,a.jsx)("option",{value:"GOTS Certified",children:"GOTS Certified"})]})]}),(0,a.jsxs)("div",{className:"mt-3 flex gap-2 mobile-stack",children:[(0,a.jsx)("button",{onClick:b,className:"btn-primary",children:"Apply Filters"}),(0,a.jsx)("button",{onClick:()=>{p({category:"",minScore:"",location:"",certification:""}),t("")},className:"btn-secondary",children:"Clear Filters"})]})]}),(0,a.jsxs)("div",{children:[s.length>0&&(0,a.jsxs)("p",{className:"mb-4 text-gray-600",children:["Found ",s.length," suppliers"]}),s.map(e=>(0,a.jsxs)("div",{className:"p-4 border bg-white rounded mb-2 shadow hover:shadow-md transition-shadow bounce-in",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsx)(o(),{href:"/supplier/".concat(e.id),className:"font-semibold text-lg text-blue-600 hover:text-blue-800 hover:underline",children:e.name}),(0,a.jsxs)("span",{className:"px-2 py-1 rounded text-sm ".concat(e.sustainability_score>=90?"bg-green-100 text-green-800":e.sustainability_score>=80?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"),children:["Score: ",e.sustainability_score,"/100"]})]}),(0,a.jsx)("p",{className:"text-gray-600 mb-2",children:e.description}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 text-sm text-gray-500 mb-2",children:[(0,a.jsxs)("span",{children:["\uD83D\uDCCD ",e.location]}),(0,a.jsxs)("span",{children:["\uD83C\uDFED ",e.category]}),e.employee_count&&(0,a.jsxs)("span",{children:["\uD83D\uDC65 ",e.employee_count," employees"]})]}),e.certifications&&e.certifications.length>0&&(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Certifications: "}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:e.certifications.map((e,t)=>(0,a.jsx)("span",{className:"bg-green-100 text-green-700 px-2 py-1 rounded text-xs",children:e},t))})]}),e.website&&(0,a.jsx)("a",{href:e.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm",children:"\uD83C\uDF10 Visit Website"})]},e.id)),0===s.length&&e&&(0,a.jsx)("p",{className:"text-gray-500 text-center py-8",children:"No suppliers found matching your criteria."})]})]}),(0,a.jsxs)("section",{id:"suppliers",className:"mb-12 slide-up",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Featured Suppliers"}),(0,a.jsx)("p",{children:"Directory of verified green suppliers. (Data from Supabase)"})]}),(0,a.jsxs)("section",{id:"resources",className:"mb-12 slide-up",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Sustainability Resources"}),(0,a.jsx)("p",{children:"Guides, certifications, and tools for green sourcing."})]}),(0,a.jsxs)("section",{id:"investors",className:"mb-12 slide-up",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"For Investors"}),(0,a.jsx)("p",{children:"Impact metrics: Reduced carbon footprint by 30% for partnered businesses. Hosted on Cloudflare for global reach and low latency."}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Trusted Certifications"}),(0,a.jsxs)("ul",{className:"list-disc list-inside",children:[(0,a.jsx)("li",{children:"ISO 14001 Compliant"}),(0,a.jsx)("li",{children:"Carbon Neutral Verified"})]}),(0,a.jsx)("h3",{className:"font-semibold mt-4",children:"Testimonials"}),(0,a.jsx)("blockquote",{className:"italic",children:'"GreenSourcing Hub democratized sustainable sourcing for our B2B operations." - Investor A'})]})]}),(0,a.jsxs)("section",{id:"contact",className:"bg-white p-6 rounded shadow glass-effect slide-up",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Contact Us"}),(0,a.jsx)("input",{type:"email",value:c,onChange:e=>d(e.target.value),placeholder:"Your email",className:"input-field mb-2"}),(0,a.jsx)("textarea",{value:u,onChange:e=>h(e.target.value),placeholder:"Inquiry or partnership interest",className:"input-field mb-4"}),(0,a.jsx)("button",{onClick:j,className:"btn-primary",children:"Send via Zoho"})]})]}):(0,a.jsxs)("div",{className:"text-center mb-12 p-8 bg-white rounded-lg shadow glass-effect bounce-in",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Welcome to GreenChainz"}),(0,a.jsx)("p",{className:"mb-6 text-gray-600",children:"Sign in to access our database of sustainable suppliers and start your green sourcing journey."}),(0,a.jsx)("a",{href:"/auth",className:"btn-primary inline-block",children:"Sign In to Get Started"})]})]})})}}},e=>{e.O(0,[553,619,441,255,358],()=>e(e.s=921)),_N_E=e.O()}]);